# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание проекта

Проект "Web-larёk" представляет из себя интернет-магазин с товарами для веб-разработчиков. В нём можно посмотреть каталог товаров, добавить товары в корзину и сделать заказ.

## Описание интерфейса

Интерфейс можно условно разделить на следующие процессы:

1. Просмотр каталога товаров (Products)
2. Выбор и просмотр товара через модальное окно (ProductCardModal)
3. Оформление заказа (ShoppingCartModal, FormModal, SuccessScreen)

Все модальные окна используют один шаблон для вставки в верстку. Класс ModalContainer отвечает за вставку темплейтов в верстку.

## Архитектура проекта (MVC)

Планируется соединять модель и отображение через заранее заготовленный брокер событий.

### Базовый код

1. Класс **Api**
   Отвечает за запросы на сервер. Включает в себя все виды запросов: 'GET', 'POST', 'PUT', 'DELETE'.

2. Класс **EventEmitter**
   Брокер событий устанавливает оброботчик на события через метод "on", снимает "off", Инициировать событие с данными "emit", Слушает все события "onAll", Сбросить все обработчики "offAll", создает коллбек триггер, генерирующий событие при вызове "trigger".

### Компоненты модели данных (бизнес-логика)

#### Класс **Product**

Отвечает за хранение данных о товарах, принимает массив объектов с информацией о товаре:

```
items: Array<IProductCard>
```

Хранит в себе функцию открытия модального окна с превью товара, функцию добавления карточку в корзину покупок, и функцию закрытия модального окна. Взаимодействует с классом открытия модального окна, передавая ему id темплейта.

- openProductCardModal(element: IProductCard)
- addCardToOrder(cardId: string)
- closeModal()

#### Класс **CardListAPI**

Наследует базовый класс **Api**, отвечает за получение и хранение данных о товаре с сервера.

#### Класс **ShoppingBasket**

Класс отображающий информацию о списке добавленных товаров в корзину. Принимает в конструктор массив из списка товаров, id темплейти для открытия модального окна корзины(метод). Содержит методы:

- deleteItem(id: string): void {}
- order(): void {}
- closeModal(): void {}

#### Класс **Form**

Общий класс формы, содержащий в себе два этапа заполнения формы:

1.  тип оплаты и адрес
2.  почта и телефон

Функция, которая будет записывать данные с двух форм в константу и затем ее возвращать.

```getValue(value1: string | null, value2: string | null): UserData;

```

postData() - Функция, отправляющая данные с формы на сервер
validation(value1: string | null, value2: string | null): boolean {} - общий вид функции валидации формы.

- closeModal(): void {} - закрытие модального окна формы
- continueButton(): void {} - кнопка продолжить для первой формы
- submitFormButton(): void {} - кнопка подтверждения заполнения формы

### Компоненты представления

#### Класс **ModalContainer**

Выведение темплейтов в интерфейс. В зависимости от переданных аргуметов, внутри функции будут вызываться классы, отвечющие за те или иные темплейты и возвращать код для вставки в верстку. Принимает id конкретного темплейта: item: Templates.

```
	createTemplate(
		item: Templates,
		coast?: number,
		cardData?: object,
		productList?: Array<IProductCard>
	): HTMLElement {}
	pastElement(item: HTMLElement): void {}
	deleteElement(item: HTMLElement): void {}
```

Метод pastElement отвечает за вставку элемента в шаблон модального окна и затем в верстку, deleteElement удаляет данные из шаблона модального окна.

Классы отвечающие за отрисовку темплейтов:

- SuccessScreen - _Класс отвечающий за темплейт '#success'_
- ProductCard - _Класс отвечающий за темплейт '#card-catalog'_
- ProductCardPreview - _Класс отвечающий за темплейт '#card-preview'_
- CardBasket - _Класс отвечающий за темплейт '#card-basket'_
- Basket - _Класс отвечающий за темплейт '#basket'_
- Order - _Класс отвечающий за темплейт '#order'_
- Contacts - _Класс отвечающий за темплейт '#contacts_

### Ключевые типы данных

Интерфейс данных товара

```
interface IProductCard {
	image: string;
	text: string;
	price: number | null;
	header: string;
	category: string;
	id: string;
}

```

Интерфейс данных пользователя

```
interface UserData {
	address?: string;
	email?: string;
	telephone?: string;
	typeOfPayment?: string;
}
```

id темплейтов

```
type Templates =
	| '#success'
	| '#card-catalog'
	| '#card-preview'
	| '#card-basket'
	| '#basket'
	| '#order'
	| '#contacts';
```
